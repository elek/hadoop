<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_45) on Wed Aug 06 17:38:50 UTC 2014 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
JournalSet (Apache Hadoop HDFS 2.5.0 API)
</TITLE>

<META NAME="date" CONTENT="2014-08-06">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="JournalSet (Apache Hadoop HDFS 2.5.0 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/JournalSet.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.CorruptionException.html" title="class in org.apache.hadoop.hdfs.server.namenode"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.RequestStopException.html" title="class in org.apache.hadoop.hdfs.server.namenode"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/JournalSet.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="JournalSet.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.hadoop.hdfs.server.namenode</FONT>
<BR>
Class JournalSet</H2>
<PRE>
<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.hadoop.hdfs.server.namenode.JournalSet</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</A>, org.apache.hadoop.hdfs.server.common.Storage.FormatConfirmable, org.apache.hadoop.hdfs.server.namenode.JournalManager</DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.57"><B>JournalSet</B></A><DT>extends <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A><DT>implements org.apache.hadoop.hdfs.server.namenode.JournalManager</DL>
</PRE>

<P>
Manages a collection of Journals. None of the methods are synchronized, it is
 assumed that FSEditLog methods, that use this class, use proper
 synchronization.
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="nested_classes_inherited_from_class_org.apache.hadoop.hdfs.server.namenode.JournalManager"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Nested classes/interfaces inherited from interface org.apache.hadoop.hdfs.server.namenode.JournalManager</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.CorruptionException.html" title="class in org.apache.hadoop.hdfs.server.namenode">JournalManager.CorruptionException</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util">Comparator</A>&lt;org.apache.hadoop.hdfs.server.namenode.EditLogInputStream&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#EDIT_LOG_INPUT_STREAM_COMPARATOR">EDIT_LOG_INPUT_STREAM_COMPARATOR</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#canRollBack(org.apache.hadoop.hdfs.server.common.StorageInfo, org.apache.hadoop.hdfs.server.common.StorageInfo, int)">canRollBack</A></B>(org.apache.hadoop.hdfs.server.common.StorageInfo&nbsp;storage,
                       org.apache.hadoop.hdfs.server.common.StorageInfo&nbsp;prevStorage,
                       int&nbsp;targetLayoutVersion)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return true if this JM can roll back to the previous storage state, false
 otherwise.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#chainAndMakeRedundantStreams(java.util.Collection, java.util.PriorityQueue, long)">chainAndMakeRedundantStreams</A></B>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;org.apache.hadoop.hdfs.server.namenode.EditLogInputStream&gt;&nbsp;outStreams,
                                                         <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html?is-external=true" title="class or interface in java.util">PriorityQueue</A>&lt;org.apache.hadoop.hdfs.server.namenode.EditLogInputStream&gt;&nbsp;allStreams,
                                                         long&nbsp;fromTxId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close the journal manager, freeing any resources it may hold.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#discardSegments(long)">discardSegments</A></B>(long&nbsp;startTxId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Discard the segments whose first txid is >= the given txid.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#doFinalize()">doFinalize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Finalize the upgrade.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#doPreUpgrade()">doPreUpgrade</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Perform any steps that must succeed across all JournalManagers involved in
 an upgrade before proceeding onto the actual upgrade stage.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#doRollback()">doRollback</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Perform the rollback to the previous FS state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#doUpgrade(org.apache.hadoop.hdfs.server.common.Storage)">doUpgrade</A></B>(org.apache.hadoop.hdfs.server.common.Storage&nbsp;storage)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Perform the actual upgrade of the JM.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#finalizeLogSegment(long, long)">finalizeLogSegment</A></B>(long&nbsp;firstTxId,
                                     long&nbsp;lastTxId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mark the log segment that spans from firstTxId to lastTxId
 as finalized and complete.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)">format</A></B>(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo&nbsp;nsInfo)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Format the underlying storage, removing any previously
 stored data.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/protocol/RemoteEditLogManifest.html" title="class in org.apache.hadoop.hdfs.server.protocol">RemoteEditLogManifest</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#getEditLogManifest(long)">getEditLogManifest</A></B>(long&nbsp;fromTxId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return a manifest of what finalized edit logs are available.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#getJournalCTime()">getJournalCTime</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#hasSomeData()">hasSomeData</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#isEmpty()">isEmpty</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if there are no journals, all redundant journals are disabled,
 or any required journals are disabled.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#purgeLogsOlderThan(long)">purgeLogsOlderThan</A></B>(long&nbsp;minTxIdToKeep)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove all edit logs with transaction IDs lower than the given transaction
 ID.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#recoverUnfinalizedSegments()">recoverUnfinalizedSegments</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recover segments which have not been finalized.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#selectInputStreams(java.util.Collection, long, boolean)">selectInputStreams</A></B>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;org.apache.hadoop.hdfs.server.namenode.EditLogInputStream&gt;&nbsp;streams,
                                     long&nbsp;fromTxId,
                                     boolean&nbsp;inProgressOk)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In this function, we get a bunch of streams from all of our JournalManager
 objects.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#setOutputBufferCapacity(int)">setOutputBufferCapacity</A></B>(int&nbsp;size)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the amount of memory that this stream should use to buffer edits</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.apache.hadoop.hdfs.server.namenode.EditLogOutputStream</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalSet.html#startLogSegment(long, int)">startLogSegment</A></B>(long&nbsp;txId,
                               int&nbsp;layoutVersion)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Begin writing to a new segment of the log stream, which starts at
 the given transaction ID.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.apache.hadoop.hdfs.server.common.Storage.FormatConfirmable"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface org.apache.hadoop.hdfs.server.common.Storage.FormatConfirmable</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>toString</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="EDIT_LOG_INPUT_STREAM_COMPARATOR"><!-- --></A><H3>
EDIT_LOG_INPUT_STREAM_COMPARATOR</H3>
<PRE>
public static final <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html?is-external=true" title="class or interface in java.util">Comparator</A>&lt;org.apache.hadoop.hdfs.server.namenode.EditLogInputStream&gt; <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.62"><B>EDIT_LOG_INPUT_STREAM_COMPARATOR</B></A></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="format(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo)"><!-- --></A><H3>
format</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.190"><B>format</B></A>(org.apache.hadoop.hdfs.server.protocol.NamespaceInfo&nbsp;nsInfo)
            throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Format the underlying storage, removing any previously
 stored data.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>format</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="hasSomeData()"><!-- --></A><H3>
hasSomeData</H3>
<PRE>
public boolean <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.196"><B>hasSomeData</B></A>()
                    throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>hasSomeData</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.common.Storage.FormatConfirmable</CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true if the storage seems to have some valid data in it,
 and the user should be required to confirm the format. Otherwise,
 false.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE> - if the storage cannot be accessed at all.</DL>
</DD>
</DL>
<HR>

<A NAME="startLogSegment(long, int)"><!-- --></A><H3>
startLogSegment</H3>
<PRE>
public org.apache.hadoop.hdfs.server.namenode.EditLogOutputStream <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.204"><B>startLogSegment</B></A>(long&nbsp;txId,
                                                                                  int&nbsp;layoutVersion)
                                                                           throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Begin writing to a new segment of the log stream, which starts at
 the given transaction ID.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>startLogSegment</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="finalizeLogSegment(long, long)"><!-- --></A><H3>
finalizeLogSegment</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.216"><B>finalizeLogSegment</B></A>(long&nbsp;firstTxId,
                               long&nbsp;lastTxId)
                        throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Mark the log segment that spans from firstTxId to lastTxId
 as finalized and complete.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>finalizeLogSegment</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.230"><B>close</B></A>()
           throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Close the journal manager, freeing any resources it may hold.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/Closeable.html?is-external=true#close()" title="class or interface in java.io">close</A></CODE> in interface <CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</A></CODE><DT><B>Specified by:</B><DD><CODE>close</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="selectInputStreams(java.util.Collection, long, boolean)"><!-- --></A><H3>
selectInputStreams</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.249"><B>selectInputStreams</B></A>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;org.apache.hadoop.hdfs.server.namenode.EditLogInputStream&gt;&nbsp;streams,
                               long&nbsp;fromTxId,
                               boolean&nbsp;inProgressOk)
                        throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>In this function, we get a bunch of streams from all of our JournalManager
 objects.  Then we add these to the collection one by one.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>streams</CODE> - The collection to add the streams to.  It may or 
                         may not be sorted-- this is up to the caller.<DD><CODE>fromTxId</CODE> - The transaction ID to start looking for streams at<DD><CODE>inProgressOk</CODE> - Should we consider unfinalized streams?
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE> - if the underlying storage has an error or is otherwise
 inaccessible</DL>
</DD>
</DL>
<HR>

<A NAME="chainAndMakeRedundantStreams(java.util.Collection, java.util.PriorityQueue, long)"><!-- --></A><H3>
chainAndMakeRedundantStreams</H3>
<PRE>
public static void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.269"><B>chainAndMakeRedundantStreams</B></A>(<A HREF="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</A>&lt;org.apache.hadoop.hdfs.server.namenode.EditLogInputStream&gt;&nbsp;outStreams,
                                                <A HREF="http://download.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html?is-external=true" title="class or interface in java.util">PriorityQueue</A>&lt;org.apache.hadoop.hdfs.server.namenode.EditLogInputStream&gt;&nbsp;allStreams,
                                                long&nbsp;fromTxId)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isEmpty()"><!-- --></A><H3>
isEmpty</H3>
<PRE>
public boolean <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.312"><B>isEmpty</B></A>()</PRE>
<DL>
<DD>Returns true if there are no journals, all redundant journals are disabled,
 or any required journals are disabled.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>True if there no journals, all redundant journals are disabled,
 or any required journals are disabled.</DL>
</DD>
</DL>
<HR>

<A NAME="setOutputBufferCapacity(int)"><!-- --></A><H3>
setOutputBufferCapacity</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.527"><B>setOutputBufferCapacity</B></A>(int&nbsp;size)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Set the amount of memory that this stream should use to buffer edits
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>setOutputBufferCapacity</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="purgeLogsOlderThan(long)"><!-- --></A><H3>
purgeLogsOlderThan</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.576"><B>purgeLogsOlderThan</B></A>(long&nbsp;minTxIdToKeep)
                        throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>Remove all edit logs with transaction IDs lower than the given transaction
 ID.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>minTxIdToKeep</CODE> - the lowest transaction ID that should be retained
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE> - in the event of error</DL>
</DD>
</DL>
<HR>

<A NAME="recoverUnfinalizedSegments()"><!-- --></A><H3>
recoverUnfinalizedSegments</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.586"><B>recoverUnfinalizedSegments</B></A>()
                                throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Recover segments which have not been finalized.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>recoverUnfinalizedSegments</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getEditLogManifest(long)"><!-- --></A><H3>
getEditLogManifest</H3>
<PRE>
public <A HREF="../../../../../../org/apache/hadoop/hdfs/server/protocol/RemoteEditLogManifest.html" title="class in org.apache.hadoop.hdfs.server.protocol">RemoteEditLogManifest</A> <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.603"><B>getEditLogManifest</B></A>(long&nbsp;fromTxId)</PRE>
<DL>
<DD>Return a manifest of what finalized edit logs are available. All available
 edit logs are returned starting from the transaction id passed. If
 'fromTxId' falls in the middle of a log, that log is returned as well.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fromTxId</CODE> - Starting transaction id to read the logs.
<DT><B>Returns:</B><DD>RemoteEditLogManifest object.</DL>
</DD>
</DL>
<HR>

<A NAME="discardSegments(long)"><!-- --></A><H3>
discardSegments</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.675"><B>discardSegments</B></A>(long&nbsp;startTxId)
                     throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Discard the segments whose first txid is >= the given txid.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>discardSegments</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>startTxId</CODE> - The given txid should be right at the segment boundary, 
 i.e., it should be the first txid of some segment, if segment corresponding
 to the txid exists.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="doPreUpgrade()"><!-- --></A><H3>
doPreUpgrade</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.681"><B>doPreUpgrade</B></A>()
                  throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Perform any steps that must succeed across all JournalManagers involved in
 an upgrade before proceeding onto the actual upgrade stage. If a call to
 any JM's doPreUpgrade method fails, then doUpgrade will not be called for
 any JM.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>doPreUpgrade</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="doUpgrade(org.apache.hadoop.hdfs.server.common.Storage)"><!-- --></A><H3>
doUpgrade</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.687"><B>doUpgrade</B></A>(org.apache.hadoop.hdfs.server.common.Storage&nbsp;storage)
               throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Perform the actual upgrade of the JM. After this is completed, the NN can
 begin to use the new upgraded metadata. This metadata may later be either
 finalized or rolled back to the previous state.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>doUpgrade</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>storage</CODE> - info about the new upgraded versions.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="doFinalize()"><!-- --></A><H3>
doFinalize</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.693"><B>doFinalize</B></A>()
                throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Finalize the upgrade. JMs should purge any state that they had been keeping
 around during the upgrade process. After this is completed, rollback is no
 longer allowed.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>doFinalize</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="canRollBack(org.apache.hadoop.hdfs.server.common.StorageInfo, org.apache.hadoop.hdfs.server.common.StorageInfo, int)"><!-- --></A><H3>
canRollBack</H3>
<PRE>
public boolean <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.699"><B>canRollBack</B></A>(org.apache.hadoop.hdfs.server.common.StorageInfo&nbsp;storage,
                           org.apache.hadoop.hdfs.server.common.StorageInfo&nbsp;prevStorage,
                           int&nbsp;targetLayoutVersion)
                    throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Return true if this JM can roll back to the previous storage state, false
 otherwise. The NN will refuse to run the rollback operation unless at least
 one JM or fsimage storage directory can roll back.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>canRollBack</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>storage</CODE> - the storage info for the current state<DD><CODE>prevStorage</CODE> - the storage info for the previous (unupgraded) state<DD><CODE>targetLayoutVersion</CODE> - the layout version we intend to roll back to
<DT><B>Returns:</B><DD>true if this JM can roll back, false otherwise.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="doRollback()"><!-- --></A><H3>
doRollback</H3>
<PRE>
public void <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.705"><B>doRollback</B></A>()
                throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></B></DD>
<DD>Perform the rollback to the previous FS state. JMs which do not need to
 roll back their state should just return without error.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>doRollback</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getJournalCTime()"><!-- --></A><H3>
getJournalCTime</H3>
<PRE>
public long <A HREF="../../../../../../src-html/org/apache/hadoop/hdfs/server/namenode/JournalSet.html#line.711"><B>getJournalCTime</B></A>()
                     throws <A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>getJournalCTime</CODE> in interface <CODE>org.apache.hadoop.hdfs.server.namenode.JournalManager</CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the CTime of the journal manager.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/JournalSet.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalManager.CorruptionException.html" title="class in org.apache.hadoop.hdfs.server.namenode"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/MetaRecoveryContext.RequestStopException.html" title="class in org.apache.hadoop.hdfs.server.namenode"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/JournalSet.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="JournalSet.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2014 <a href="http://www.apache.org">Apache Software Foundation</a>. All Rights Reserved.
</BODY>
</HTML>
